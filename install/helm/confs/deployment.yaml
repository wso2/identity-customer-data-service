env: {{ .Values.cloud.deployment.cds.config.env }}

log:
  log_level: {{ .Values.cloud.deployment.cds.config.logLevel }} # "INFO", "WARN", "ERROR", "DEBUG"

cache:
  enabled: {{ .Values.cloud.deployment.cds.config.cache.enabled }}
  default_cache_timeout: {{ .Values.cloud.deployment.cds.config.cache.defaultCacheTimeout }}

auth:
  cors_allowed_origins:
  {{- range .Values.cloud.deployment.cds.config.auth.corsAllowedOrigins }}
  - {{ . | quote }}
  {{- end }}

addr:
  host: {{ .Values.cloud.deployment.cds.config.addr.host }}
  port: {{ .Values.cloud.deployment.cds.containerPort }}

auth_server:
  host: {{ .Values.cloud.deployment.cds.config.identityServer.host }}
  port : {{ .Values.cloud.deployment.cds.config.identityServer.port }}
  cookieDomain: {{ .Values.cloud.deployment.cds.config.identityServer.cookieDomain }}
  introspectionEndpoint: {{ .Values.cloud.deployment.cds.config.identityServer.introspectionEndpoint }}
  tokenEndpoint: {{ .Values.cloud.deployment.cds.config.identityServer.tokenEndpoint }}
  revocationEndpoint: {{ .Values.cloud.deployment.cds.config.identityServer.revocationEndpoint }}
  claimsEndpoint: {{ .Values.cloud.deployment.cds.config.identityServer.claimsEndpoint }}
  client_id: "${AUTH_SERVER_CLIENT_ID}"
  client_secret: "${AUTH_SERVER_CLIENT_SECRET}"
  admin_username: "${AUTH_SERVER_ADMIN_USERNAME}"
  admin_password: "${AUTH_SERVER_ADMIN_PASSWORD}"
  isSystemAppGrantEnabled: {{ .Values.cloud.deployment.cds.config.identityServer.isSystemAppGrantEnabled }}
  required_scopes:
    profile:create:
      - "internal_cds_profile_create"
    profile:update:
      - "internal_cds_profile_update"
    profile:view:
      - "internal_cds_profile_view"
    profile:delete:
      - "internal_cds_profile_delete"

    unification_rules:view:
      - "internal_cds_unification_rule_view"
    unification_rules:create:
      - "internal_cds_unification_rule_create"
    unification_rules:update:
      - "internal_cds_unification_rule_update"
    unification_rules:delete:
      - "internal_cds_unification_rule_delete"

    profile_schema:view:
      - "internal_cds_profile_schema_view"
    profile_schema:create:
      - "internal_cds_profile_schema_create"
    profile_schema:update:
      - "internal_cds_profile_schema_update"
    profile_schema:delete:
      - "internal_cds_profile_schema_delete"

    admin_config:view:
      - "internal_cds_admin_config_view"
    admin_config:update:
      - "internal_cds_admin_config_update"

datasource:
  type: {{ .Values.cloud.deployment.cds.config.datasource.type }}
  hostname: {{ .Values.cloud.deployment.cds.config.datasource.hostname }}
  port: {{ .Values.cloud.deployment.cds.config.datasource.port }}
  username: "${DB_USERNAME}"
  password: "${DB_PASSWORD}"
  name: {{ .Values.cloud.deployment.cds.config.datasource.name | quote }}
  sslmode: {{ .Values.cloud.deployment.cds.config.datasource.sslmode | quote }}

tls:
  mtls_enabled: {{ .Values.cloud.deployment.cds.tls.mtls_enabled }}
  cert_dir: "{{ .Values.cloud.deployment.cds.tls.cert_dir }}"
  server_cert: "{{ .Values.cloud.deployment.cds.tls.server_cert }}"
  server_key: "{{ .Values.cloud.deployment.cds.tls.server_key }}"
  client_cert: "{{ .Values.cloud.deployment.cds.tls.client_cert }}"
  trust_store: "{{ .Values.cloud.deployment.cds.tls.trust_store }}"
